{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"./material.service\";\nimport * as i2 from \"./auth.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction MaterialFormComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.authMsg);\n  }\n}\nfunction MaterialFormComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r1.message);\n  }\n}\nexport class MaterialFormComponent {\n  constructor(svc, auth) {\n    this.svc = svc;\n    this.auth = auth;\n    this.payload = {\n      nombre: '',\n      tipo: '',\n      precio: null,\n      fechaCompra: '',\n      fechaVenta: '',\n      ciudadId: 1\n    };\n    this.message = '';\n    this.user = 'admin';\n    this.pass = 'password';\n    this.authMsg = '';\n  }\n  login() {\n    this.auth.login(this.user, this.pass).subscribe({\n      next: res => {\n        const token = res.data?.token;\n        if (token) {\n          this.auth.setToken(token);\n          this.authMsg = 'Login exitoso';\n        } else {\n          this.authMsg = 'Respuesta sin token';\n        }\n      },\n      error: err => this.authMsg = err.error?.message || 'Error login'\n    });\n  }\n  onSubmit() {\n    const body = {\n      nombre: this.payload.nombre,\n      tipo: this.payload.tipo,\n      precio: this.payload.precio ? Number(this.payload.precio) : null,\n      fechaCompra: this.payload.fechaCompra ? this.payload.fechaCompra : null,\n      fechaVenta: this.payload.fechaVenta ? this.payload.fechaVenta : null,\n      estado: 'disponible',\n      ciudadId: Number(this.payload.ciudadId)\n    };\n    this.svc.create(body).subscribe({\n      next: res => this.message = res.message,\n      error: err => this.message = err.error?.message || 'Error'\n    });\n  }\n  static {\n    this.ɵfac = function MaterialFormComponent_Factory(t) {\n      return new (t || MaterialFormComponent)(i0.ɵɵdirectiveInject(i1.MaterialService), i0.ɵɵdirectiveInject(i2.AuthService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: MaterialFormComponent,\n      selectors: [[\"app-material-form\"]],\n      decls: 21,\n      vars: 10,\n      consts: [[2, \"margin-bottom\", \"20px\"], [\"placeholder\", \"username\", 3, \"ngModel\", \"ngModelChange\"], [\"placeholder\", \"password\", \"type\", \"password\", 3, \"ngModel\", \"ngModelChange\"], [3, \"click\"], [4, \"ngIf\"], [3, \"submit\"], [\"name\", \"nombre\", \"placeholder\", \"Nombre\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"tipo\", \"placeholder\", \"Tipo\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"precio\", \"placeholder\", \"Precio\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"fechaCompra\", \"placeholder\", \"Fecha Compra (YYYY-MM-DD)\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"fechaVenta\", \"placeholder\", \"Fecha Venta (YYYY-MM-DD)\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"ciudadId\", \"placeholder\", \"CiudadId\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\"]],\n      template: function MaterialFormComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h3\");\n          i0.ɵɵtext(2, \"Login (demo)\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"input\", 1);\n          i0.ɵɵlistener(\"ngModelChange\", function MaterialFormComponent_Template_input_ngModelChange_3_listener($event) {\n            return ctx.user = $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"input\", 2);\n          i0.ɵɵlistener(\"ngModelChange\", function MaterialFormComponent_Template_input_ngModelChange_4_listener($event) {\n            return ctx.pass = $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"button\", 3);\n          i0.ɵɵlistener(\"click\", function MaterialFormComponent_Template_button_click_5_listener() {\n            return ctx.login();\n          });\n          i0.ɵɵtext(6, \"Login\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(7, MaterialFormComponent_div_7_Template, 2, 1, \"div\", 4);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(8, \"div\")(9, \"h3\");\n          i0.ɵɵtext(10, \"Crear Material\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"form\", 5);\n          i0.ɵɵlistener(\"submit\", function MaterialFormComponent_Template_form_submit_11_listener($event) {\n            ctx.onSubmit();\n            return $event.preventDefault();\n          });\n          i0.ɵɵelementStart(12, \"input\", 6);\n          i0.ɵɵlistener(\"ngModelChange\", function MaterialFormComponent_Template_input_ngModelChange_12_listener($event) {\n            return ctx.payload.nombre = $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(13, \"input\", 7);\n          i0.ɵɵlistener(\"ngModelChange\", function MaterialFormComponent_Template_input_ngModelChange_13_listener($event) {\n            return ctx.payload.tipo = $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"input\", 8);\n          i0.ɵɵlistener(\"ngModelChange\", function MaterialFormComponent_Template_input_ngModelChange_14_listener($event) {\n            return ctx.payload.precio = $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"input\", 9);\n          i0.ɵɵlistener(\"ngModelChange\", function MaterialFormComponent_Template_input_ngModelChange_15_listener($event) {\n            return ctx.payload.fechaCompra = $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(16, \"input\", 10);\n          i0.ɵɵlistener(\"ngModelChange\", function MaterialFormComponent_Template_input_ngModelChange_16_listener($event) {\n            return ctx.payload.fechaVenta = $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(17, \"input\", 11);\n          i0.ɵɵlistener(\"ngModelChange\", function MaterialFormComponent_Template_input_ngModelChange_17_listener($event) {\n            return ctx.payload.ciudadId = $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"button\", 12);\n          i0.ɵɵtext(19, \"Crear\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(20, MaterialFormComponent_div_20_Template, 2, 1, \"div\", 4);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngModel\", ctx.user);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngModel\", ctx.pass);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.authMsg);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngModel\", ctx.payload.nombre);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngModel\", ctx.payload.tipo);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngModel\", ctx.payload.precio);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngModel\", ctx.payload.fechaCompra);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngModel\", ctx.payload.fechaVenta);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngModel\", ctx.payload.ciudadId);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.message);\n        }\n      },\n      dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm],\n      encapsulation: 2\n    });\n  }\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}